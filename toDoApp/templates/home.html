{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}
  <h1>To-Do List</h1><br>

  <a href="{% url 'add' %}" class="btn btn-primary">Add New Task</a>

  {% if todos %}
    <ul class="task-list">
      {% for todo in todos %}
        <li class="task-item">
          <form method="POST" action="{% url 'toggle' todo.id %}" class="task-checkbox-form">
            {% csrf_token %}
            <input type="checkbox" name="completed" onchange="this.form.submit()" {% if todo.completed %}checked{% endif %}>
          </form>
          <span class="task-title {% if todo.completed %}completed{% endif %}">
            {{ todo.title }} 
            {% comment %} - Due: {{ todo.due_date|date:"M d, Y" }} {% endcomment %}
          </span>
          <a href="{% url 'update' todo.id %}" class="btn btn-secondary">Edit</a>
          <a href="{% url 'delete' todo.id %}" class="btn btn-danger">Delete</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
  <p><br>No tasks yet! Add one above.</p>
  {% endif %}
{% endblock %}


{% comment %} {% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
</head>
<body>
    <h2>Welcome to the ToDo App</h2>
    <form method="POST" action="{% url 'home' %}">
        {% csrf_token %}
        {{form}}
        <button type="submit">Add</button>
    </form>
    <h3>To-Do List</h3>
    <ul>
        {% for todo in todos %}
            {% comment %} <li>{{ todo.title }}</li> {% endcomment %}
            {% comment %} <li>
                <form action="{% url 'update' todo.id %}" method="POST">
                    {% csrf_token %}
                    <input type="text" name="title" value="{{ todo.title }}">
                    <button type="submit">Update</button>
                </form>
                <form action="{% url 'delete' todo.id %}" method="POST">
                    {% csrf_token %}
                    <button type="submit">Delete</button>
                </form>
            </li>
        {% endfor %}
    </ul>
</body>
</html> {% endcomment %} 